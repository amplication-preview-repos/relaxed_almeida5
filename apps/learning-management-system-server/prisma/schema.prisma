datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Tariff {
  id         String    @id @default(cuid())
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  accessDate DateTime?
  courses    Course[]
  client     Client?   @relation(fields: [clientId], references: [id])
  clientId   String?
}

model Client {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  firstName String?
  lastName  String?
  email     String?
  password  String?
  tariffs   Tariff[]
}

model Course {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tariff    Tariff?  @relation(fields: [tariffId], references: [id])
  tariffId  String?
  servers   Server[]
}

model Server {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  course    Course?  @relation(fields: [courseId], references: [id])
  courseId  String?
  servers   Server[] @relation(name: "ServerOnServers")
  server    Server?  @relation(name: "ServerOnServers", fields: [serverId], references: [id])
  serverId  String?
}

model User {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  firstName String?
  lastName  String?
  username  String   @unique
  email     String?  @unique
  password  String
  roles     Json
}
